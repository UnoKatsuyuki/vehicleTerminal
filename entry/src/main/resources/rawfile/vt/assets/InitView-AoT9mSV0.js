/* empty css                  */import{_ as V,r as B,a as S,c as C,o as $,b as i,d as a,F as A,e as N,f as o,u as d,s as F,E as P,w as l,g as T,h as c,i as k,j as u,l as j,k as z,m as L,n as M,t as _,p as R,v as q,q as G,x as E,y as U}from"./index-CCAfALLo.js";const H="http://192.168.2.57/prod-api",p=async m=>{const n=await fetch(`${H}${m}`);if(!n.ok)throw new Error(`网络响应错误: ${n.status} ${n.statusText}`);return n.json()},J=()=>p("/system/check/fs"),K=()=>p("/system/check/db"),O=()=>p("/system/check/agv"),Q=()=>p("/system/check/cam"),W={class:"init-view-wrapper"},X={class:"init-container"},Y={class:"check-items-container"},Z={class:"check-header"},ss={class:"check-icon"},es={class:"check-message"},as={class:"check-content"},ts={key:0},ns={class:"operate-btn-group"},os={__name:"InitView",setup(m){const n=T();B(!1);const r=S([{name:"文件系统",apiCall:J,message:"正在检查系统文件完整性",solution:"请重新安装本系统。",status:"loading",errorDetails:"",isExpanded:!1},{name:"数据库",apiCall:K,message:"正在检测数据库系统连接",solution:"请检查数据库连接设置是否正确。",status:"loading",errorDetails:"",isExpanded:!1},{name:"车辆控制系统",apiCall:O,message:"正在与车辆控制系统通信",solution:"请检查巡检车IP与端口配置是否正确。",status:"loading",errorDetails:"",isExpanded:!1},{name:"摄像头",apiCall:Q,message:"正在检测摄像头通道状态",solution:"请检查摄像头IP及账号密码是否正确。",status:"loading",errorDetails:"",isExpanded:!1}]),g=C(()=>r.some(s=>s.status==="loading")),v=C(()=>r.every(s=>s.status==="success")&&!g.value),x=async s=>{s.status="loading",s.isExpanded=!1;try{const e=await s.apiCall();s.status="success",s.message=e.msg}catch(e){s.status="error",s.message=`${s.name}检测失败`,s.errorDetails=e.msg||e.message||"未知网络错误",s.isExpanded=!0}},y=()=>{r.forEach(s=>{s.isExpanded=!1,s.name==="文件系统"&&(s.message="正在检查系统文件完整性"),s.name==="数据库"&&(s.message="正在检测数据库系统连接"),s.name==="车辆控制系统"&&(s.message="正在与车辆控制系统通信"),s.name==="摄像头"&&(s.message="正在检测摄像头通道状态"),x(s)})},w=()=>{n.push({name:"settings"})},D=()=>{v.value&&(U.success("所有检查通过，进入系统主页..."),n.push({name:"task-list"}))};return $(()=>{y()}),(s,e)=>{const h=z,b=G,f=P;return c(),i("div",W,[a("div",X,[e[1]||(e[1]=a("h1",null,"AGV智能巡检系统",-1)),a("div",Y,[(c(!0),i(A,null,N(r,(t,I)=>(c(),i("div",{key:I,class:"check-item"},[a("div",Z,[a("div",ss,[t.status==="loading"?(c(),k(h,{key:0,class:"is-loading"},{default:l(()=>[o(d(j))]),_:1})):u("",!0),t.status==="success"?(c(),k(h,{key:1,class:"is-success"},{default:l(()=>[o(d(L))]),_:1})):u("",!0),t.status==="error"?(c(),k(h,{key:2,class:"is-error"},{default:l(()=>[o(d(M))]),_:1})):u("",!0)]),a("span",es,_(t.message),1)]),o(b,null,{default:l(()=>[R(a("div",as,[t.errorDetails?(c(),i("p",ts,"错误详情: "+_(t.errorDetails),1)):u("",!0),a("p",null,"解决方案: "+_(t.solution),1)],512),[[q,t.isExpanded]])]),_:2},1024)]))),128))]),a("div",ns,[o(f,{circle:"",icon:d(F),onClick:w,title:"设置"},null,8,["icon"]),o(f,{type:"success",size:"large",disabled:!v.value,onClick:D},{default:l(()=>e[0]||(e[0]=[E(" 进入系统 ")])),_:1,__:[0]},8,["disabled"]),o(f,{type:"primary",size:"large",onClick:y,loading:g.value},{default:l(()=>[E(_(g.value?"正在检测...":"重新检测"),1)]),_:1},8,["loading"])])])])}}},rs=V(os,[["__scopeId","data-v-9772e661"]]);export{rs as default};
